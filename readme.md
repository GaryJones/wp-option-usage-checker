<!-- DO NOT EDIT THIS FILE; it is auto-generated from readme.txt -->
# Option Usage Checker

Check for perilous usages of add_option()/update_option(). Dev plugin, not recommended for production. Specifically useful with Memcached Object Cache

**Contributors:** [x-team](http://profiles.wordpress.org/x-team)  
**Tags:** [options](http://wordpress.org/plugins/tags/options), [transients](http://wordpress.org/plugins/tags/transients), [memcached](http://wordpress.org/plugins/tags/memcached), [object-cache](http://wordpress.org/plugins/tags/object-cache)  
**Requires at least:** 3.9  
**Tested up to:** trunk  
**Stable tag:** trunk (master)  
**License:** [GPLv2 or later](http://www.gnu.org/licenses/gpl-2.0.html)  

## Description ##

### Error Handling ###
The plugin can either report errors as PHP warnings or by throwing exceptions. If you have `WP_DEBUG` enabled, exceptions will be thrown by default. You can override this default behavior via the `option_usage_checker_throw_exceptions` filter:

```php
add_filter( 'option_usage_checker_throw_exceptions', '__reutrn_true' ); // always throw exceptions
```

### Changing Bucket Size Limit ###
By default, the cache bucket size limit used is 1MB, which is the default limit for Memcached. You can override this default with a constant:

```php
define( 'OPTION_USAGE_CHECKER_OBJECT_CACHE_BUCKET_MAX_SIZE', 2 * pow( 2, 20 ) ); // increase to 2MB
```

Or via a filter:

```php
add_filter( 'option_value_max_size', function () {
	return 4 * pow( 2, 20 ); // 4MB
} );
```

### Whitelisting update_option() calls ###
In Core there are instances of `update_option()` being called on non-existent options. To suppress warnings on such usages, when `update_option()` is called and would raise a warning, the plugin checks the callstack to see if it was called from Core (`wp-includes` or `wp-admin`), and if so the warning will be suppressed by default. You can override this behavior (or whitelist other plugins) with a filter:

```php
add_filter( 'option_usage_checker_whitelisted', function ( $whitelisted, $callee, $callstack ) {
	if ( preg_match( '/my-awesome-plugin/', $callee['file'] ) ) {
		$whitelisted = true;
	}
	return $whitelisted;
} 10, 3 );
```


